const { expect } = require('../../../test-helper');
const imageUtils = require('../../../../lib/infrastructure/utils/image-utils');
const pngImage100x100 = 'data:image/png;base64,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';

describe('Integration | Infrastructure | Utils | Image utils', () => {

  describe('scaleDownBase64FormattedImage', () => {
    it('should effectively scale down provided image with specified parameters', async () => {
      // given
      const expectedHeight = 50;
      const expectedWidth = 50;

      // when
      // effectively doing it
      const { scaledDownImage: firstScaledDownImage, sizeDiff: firstSizeDiff } = await imageUtils.scaleDownBase64FormattedImage({
        originImage: pngImage100x100,
        height: expectedHeight,
        width: expectedWidth,
      });
      // should do nothing
      const { scaledDownImage: secondScaledDownImage, sizeDiff: secondSizeDiff } = await imageUtils.scaleDownBase64FormattedImage({
        originImage: firstScaledDownImage,
        height: expectedHeight,
        width: expectedWidth,
      });

      // then
      expect(firstSizeDiff).to.be.greaterThan(0);
      expect(secondSizeDiff).to.equal(-1);
      expect(secondScaledDownImage).to.equal(firstScaledDownImage);
      expect(pngImage100x100.length).to.be.greaterThan(firstScaledDownImage.length);
    });
  });
});
