{{page-title this.pageTitle}}

<div class="background-banner-wrapper assessment-challenge">

  <div class="assessment-challenge__assessment-banner">
    {{#if @model.assessment.isCertification}}
      <CertificationBanner @certificationNumber={{@model.assessment.certificationNumber}} @certification={{@model.assessment.certificationCourse}} />
    {{else}}
      <AssessmentBanner @title={{@model.assessment.title}} @displayHomeLink={{true}} />
    {{/if}}
  </div>

  <div class="assessment-challenge__content rounded-panel--over-background-banner">
    <ProgressBar @assessment={{@model.assessment}} @answerId={{@model.answer.id}}/>
    <main>
      {{component (get-challenge-component-class @model.challenge)
                challenge=@model.challenge
                answer=@model.answer
                assessment=@model.assessment
                answerValidated=(route-action "saveAnswerAndNavigate")
                resumeAssessment=(route-action "resumeAssessment")
    }}
    </main>
  </div>
</div>

{{#if this.showLevelup}}
  <LevelupNotif @level={{this.newLevel}} @competenceName={{this.competenceLeveled}} />
{{/if}}

{{#if this.godmodeEnabled}}
  <div>
    {{#if this.currentInfoChallenge}}
      Challenge ID : {{this.currentInfoChallenge.id}}
      TYPE : {{this.currentInfoChallenge.type}}
      Solution : {{this.currentInfoChallenge.solution}}
      pixval : {{this.currentInfoChallenge.pixValue}}
      Skill IDs : {{this.currentInfoChallenge.skillIds}}
      Skill Names : {{this.currentInfoChallenge.skillNames}}
      Tube IDs : {{this.currentInfoChallenge.tubeIds}}
      Tube Names : {{this.currentInfoChallenge.tubeNames}}
      Competence IDs : {{this.currentInfoChallenge.competenceIds}}
      Competence Names : {{this.currentInfoChallenge.competenceNames}}
      Area IDs : {{this.currentInfoChallenge.areaIds}}
      Area Names : {{this.currentInfoChallenge.areaNames}}
    {{else}}
      <button type="button" {{on 'click' this.loadCurrentInfoChallenge}}>
        Je veux toute la vérité sur ce challenge !
      </button>
    {{/if}}
  </div>
{{/if}}
