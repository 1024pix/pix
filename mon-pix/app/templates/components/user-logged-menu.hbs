<div class="logged-user-details" >
  {{#if this.currentUser.user}}
    <button class="logged-user-name logged-user-name__link"
            type="button"
            aria-haspopup="true"
            aria-expanded="{{this.canDisplayMenu}}"
      {{on 'click' this.toggleUserMenu}}>
      {{this.currentUser.user.firstName}}
      <span class="sr-only">{{t 'navigation.user-logged-menu.details'}}</span>
      <span class="caret"></span>
    </button>

    {{#if this.canDisplayMenu}}
      <ClickOutside @action={{this.closeMenu}}>
        <div class="logged-user-menu" {{on-key 'Escape' this.closeMenu}}>
          <div class="logged-user-menu__details">
            <div class="logged-user-menu-details__fullname">{{this.currentUser.user.fullName}}</div>
          </div>
          <ul class="logged-user-menu__actions">
            <li>
              <LinkTo @route="user-account" class="logged-user-menu__link" >
                {{t 'navigation.user.account'}}
              </LinkTo>
            </li>
            {{#if this.showMyTestsLink}}
              <li>
                <LinkTo @route="user-tests" class="logged-user-menu__link">
                  {{t 'navigation.user.tests'}}
                </LinkTo>
              </li>
            {{/if}}
            <li>
              <LinkTo @route="user-certifications" class="logged-user-menu__link">
                {{t 'navigation.user.certifications'}}
              </LinkTo>
            </li>
            <li>
              <a href="{{t 'navigation.main.link-help'}}" target="_blank" class="logged-user-menu__link" rel="noopener noreferrer">
                {{t 'navigation.main.help'}}
              </a>
            </li>
            <li>
              <LinkTo @route="logout" class="logged-user-menu__link">
                <FaIcon @icon="power-off" class="logged-user-menu__icon"/>
                {{t 'navigation.user.sign-out'}}
              </LinkTo>
            </li>
          </ul>
        </div>
      </ClickOutside>
    {{/if}}
  {{/if}}
</div>

