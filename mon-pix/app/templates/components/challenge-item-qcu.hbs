{{#if this.hasChallengeTimer}}
  {{#unless this.hasUserConfirmWarning}}
    <WarningPage @hasUserConfirmWarning={{action "setUserConfirmation"}} @time={{this.challenge.timer}} />
  {{/unless}}
{{/if}}

{{#unless this.hasChallengeTimer}}
  <form {{action "validateAnswer" on="submit"}} class="rounded-panel">
    <ChallengeStatement @challenge={{this.challenge}} @assessment={{this.assessment}} @class="rounded-panel__row" />

    <div class="rounded-panel__row challenge-response {{if this.answer 'challenge-response--locked'}}">
      <div class="challenge-proposals">
        <QcuProposals @answer={{this.answer}} @answerValue={{this.answer.value}} @proposals={{this.challenge.proposals}} @answerChanged={{action "answerChanged"}} />
      </div>

      {{#if this.answer}}
        <div class="challenge-response__locked-overlay">
          {{fa-icon 'lock' class='challenge-response-locked__icon'}}
        </div>
      {{/if}}
      
      {{#if this.challenge.timer}}
        {{#if this.hasUserConfirmWarning}}
          <div class="timeout-jauge-wrapper">
            <TimeoutJauge @allotedTime={{this.challenge.timer}} />
          </div>
        {{/if}}
      {{/if}}
    </div>

    {{#if this.errorMessage}}
      <div class="alert alert-danger" role="alert">
        {{this.errorMessage}}
      </div>
    {{/if}}

    {{#if this.assessment}}
      <ChallengeActions @challenge={{this.challenge}} @answer={{this.answer}} @resumeAssessment={{action "resumeAssessment"}} @validateAnswer={{action "validateAnswer"}} @skipChallenge={{action "skipChallenge"}} @isValidateButtonEnabled={{this.isValidateButtonEnabled}} @isSkipButtonEnabled={{this.isSkipButtonEnabled}} @class="rounded-panel__row" />
    {{/if}}
  </form>
{{/unless}}

{{#if this.canDisplayFeedbackPanel}}
  <div class="challenge-item__feedback">
    <FeedbackPanel @assessment={{this.assessment}} @challenge={{this.challenge}} @isFormOpened={{false}} />
  </div>
{{/if}}
