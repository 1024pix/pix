<div class="register-form">
  <form {{on "submit" this.register}}>
    <p class="login-form__information">{{t "pages.login-form.mandatory-all-fields"}}</p>
    <div id="register-firstName-container" class="input-container">
      <label for="register-firstName" class="label">{{t
          "pages.login-or-register.register-form.fields.first-name.label"
        }}</label>
      <Input
        id="register-firstName"
        name="firstName"
        @type="firstName"
        class="input {{if this.validation.firstName.hasError "input--error"}}"
        @value={{this.user.firstName}}
        required={{true}}
        autocomplete="given-name"
        {{on "focusout" (fn this.validateInput "firstName" this.user.firstName)}}
      />
      {{#if this.validation.firstName.hasError}}
        <div
          class="alert-input alert-input--error alert-input--left"
          role="alert"
        >{{this.validation.firstName.message}}</div>
      {{/if}}
    </div>

    <div id="register-lastName-container" class="input-container">
      <label for="register-lastName" class="label">{{t
          "pages.login-or-register.register-form.fields.last-name.label"
        }}</label>
      <Input
        id="register-lastName"
        name="lastName"
        @type="lastName"
        class="input {{if this.validation.lastName.hasError "input--error"}}"
        @value={{this.user.lastName}}
        autocomplete="family-name"
        required={{true}}
        {{on "focusout" (fn this.validateInput "lastName" this.user.lastName)}}
      />
      {{#if this.validation.lastName.hasError}}
        <div
          class="alert-input alert-input--error alert-input--left"
          role="alert"
        >{{this.validation.lastName.message}}</div>
      {{/if}}
    </div>

    <div id="register-email-container" class="input-container">
      <label for="register-email" class="label">{{t "pages.login-or-register.register-form.fields.email.label"}}</label>
      <Input
        id="register-email"
        name="email"
        @type="email"
        class="input {{if this.validation.email.hasError "input--error"}}"
        @value={{this.user.email}}
        autocomplete="email"
        required={{true}}
        {{on "focusout" (fn this.validateInput "email" this.user.email)}}
      />
      {{#if this.validation.email.hasError}}
        <div
          class="alert-input alert-input--error alert-input--left"
          role="alert"
        >{{this.validation.email.message}}</div>
      {{/if}}
    </div>

    <div id="register-password-container" class="input-container">
      <label for="register-password" class="label">{{t
          "pages.login-or-register.register-form.fields.password.label"
        }}</label>
      <div class="input-password {{if this.validation.password.hasError "input-password--error"}}">
        <Input
          id="register-password"
          name="password"
          @type={{this.passwordInputType}}
          class="input"
          @value={{this.user.password}}
          autocomplete="current-password"
          required={{true}}
          {{on "focusout" (fn this.validateInput "password" this.user.password)}}
        />
        <PixIconButton
          @icon="{{if this.isPasswordVisible "eye" "eye-slash"}}"
          aria-label="rendre le mot de passe lisible"
          @triggerAction={{this.togglePasswordVisibility}}
          @withBackground={{false}}
          @color="dark-grey"
        />
      </div>
      {{#if this.validation.password.hasError}}
        <div
          class="alert-input alert-input--error alert-input--left"
          role="alert"
        >{{this.validation.password.message}}</div>
      {{/if}}
    </div>

    <div id="register-cgu-container" class="input-container">
      <label for="register-cgu" class="label register-form__cgu-label">
        <Input
          id="register-cgu"
          @type="checkbox"
          @checked={{this.user.cgu}}
          required={{true}}
          aria-label="{{t "pages.login-or-register.register-form.fields.cgu.aria-label"}}"
          {{on "focusout" (fn this.validateInput "cgu" this.user.cgu)}}
        />
        <span class="register-form__cgu">
          {{t "pages.login-or-register.register-form.fields.cgu.accept"}}
          <a
            href="{{t "pages.login-or-register.register-form.fields.cgu.link"}}"
            class="link"
            target="_blank"
            rel="noopener noreferrer"
          >
            {{t "pages.login-or-register.register-form.fields.cgu.terms-of-use"}}
          </a>
        </span>
      </label>
      {{#if this.validation.cgu.hasError}}
        <div class="alert-input alert-input--error alert-input--left" role="alert">{{this.validation.cgu.message}}</div>
      {{/if}}
    </div>

    <div class="input-container">
      <PixButton @type="submit" @isLoading={{this.isLoading}}>
        {{t "pages.login-or-register.register-form.fields.button.label"}}
      </PixButton>
    </div>

  </form>

  <div class="legal-text">
    {{t "pages.login-or-register.register-form.legal-text"}}
  </div>
</div>