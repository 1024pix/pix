<form {{on "submit" @onSubmit}} class="form">

  <div class="form__field">
    <PixInput
      @id="campaign-name"
      @label={{t "pages.campaign-creation.name.label"}}
      @name="campaign-name"
      @type="text"
      class="input"
      maxlength="255"
      @value={{@campaign.name}}
    />

    {{#if @campaign.errors.name}}
      <div class="form__error error-message">
        {{display-campaign-errors @campaign.errors.name}}
      </div>
    {{/if}}
  </div>

  {{#if this.currentUser.organization.canCollectProfiles}}
    <div class="form__field-with-info">
      <div class="form__field">
        <p class="label">{{t "pages.campaign-creation.purpose.label"}}</p>
        <div class="form__radio-button">
          <input
            type="radio"
            id="assess-participants"
            name="campaign-goal"
            value="assess-participants"
            {{on "change" this.setCampaignGoal}}
          />
          <label for="assess-participants">{{t "pages.campaign-creation.purpose.assessment"}}</label>
        </div>

        <div class="form__radio-button">
          <input
            type="radio"
            id="collect-participants-profile"
            name="campaign-goal"
            value="collect-participants-profile"
            {{on "change" this.setCampaignGoal}}
          />
          <label for="collect-participants-profile">{{t "pages.campaign-creation.purpose.profiles-collection"}}</label>
        </div>
        {{#if @campaign.errors.type}}
          <div class="form__error error-message">
            {{display-campaign-errors @campaign.errors.type}}
          </div>
        {{/if}}
      </div>
      {{#if this.isCampaignGoalAssessment}}
        <div class="form__field-info">
          <span class="form__field-info-title">
            <FaIcon @icon="info-circle" class="form__field-info-icon" />
            <span>{{t "pages.campaign-creation.purpose.assessment"}}</span>
          </span>
          <span class="form__field-info-message">{{t "pages.campaign-creation.purpose.assessment-info"}}</span>
        </div>
      {{else if this.isCampaignGoalProfileCollection}}
        <div class="form__field-info">
          <span class="form__field-info-title">
            <FaIcon @icon="info-circle" class="form__field-info-icon" />
            <span>{{t "pages.campaign-creation.purpose.profiles-collection"}}</span>
          </span>
          <span class="form__field-info-message">{{t "pages.campaign-creation.purpose.profiles-collection-info"}}</span>
        </div>
      {{/if}}
    </div>
  {{/if}}

  {{#if this.isCampaignGoalAssessment}}
    <div class="form__field form__field--wide">
      <PixSelect
        @id="campaign-target-profile"
        @label={{t "pages.campaign-creation.target-profiles-list.label"}}
        @onChange={{this.setSelectedTargetProfile}}
        @options={{this.targetProfilesOptions}}
        @emptyOptionLabel=""
        @size="big"
      />
      {{#if @campaign.errors.targetProfile}}
        <div class="form__error error-message">
          {{display-campaign-errors @campaign.errors.targetProfile}}
        </div>
      {{/if}}
      {{#if this.currentUser.isSCOManagingStudents}}
        <p class="form__comment">
          {{t "pages.campaign-creation.target-profile-informations" htmlSafe=true}}
        </p>
      {{/if}}
    </div>
  {{/if}}

  {{#if this.isCampaignGoalProfileCollection}}
    <div class="form__field-with-info">
      <div class="form__field">
        <p class="label">{{t "pages.campaign-creation.multiple-sendings.question-label"}}</p>
        <div class="form__radio-button">
          <input
            type="radio"
            checked={{this.multipleSendingsEnabled}}
            id="multiple-sendings-enabled"
            name="multiple-sendings-label"
            value="true"
            {{on "change" this.selectMultipleSendingsStatus}}
          />
          <label for="multiple-sendings-enabled">{{t "pages.campaign-creation.yes"}}</label>
        </div>
        <div class="form__radio-button">
          <input
            type="radio"
            checked={{not this.multipleSendingsEnabled}}
            id="multiple-sendings-disabled"
            name="multiple-sendings-label"
            value=""
            {{on "change" this.selectMultipleSendingsStatus}}
          />
          <label for="multiple-sendings-disabled">{{t "pages.campaign-creation.no"}}</label>
        </div>
      </div>
      <div class="form__field-info">
        <span class="form__field-info-title">
          <FaIcon @icon="info-circle" class="form__field-info-icon" />
          <span>{{t "pages.campaign-creation.multiple-sendings.info-title"}}</span>
        </span>
        <span class="form__field-info-message">{{t "pages.campaign-creation.multiple-sendings.info"}}</span>
      </div>
    </div>
  {{/if}}

  <div class="form__field">
    <p class="label">{{t "pages.campaign-creation.external-id-label.question-label"}}</p>
    <div class="form__radio-button">
      <input
        type="radio"
        checked={{not this.wantIdPix}}
        id="no-external-id"
        name="external-id-label"
        {{on "change" this.doNotAskLabelIdPix}}
      />
      <label for="no-external-id">{{t "pages.campaign-creation.no"}}</label>
    </div>
    <div class="form__radio-button">
      <input
        type="radio"
        checked={{this.wantIdPix}}
        id="ask-external-id"
        name="external-id-label"
        {{on "change" this.askLabelIdPix}}
      />
      <label for="ask-external-id">{{t "pages.campaign-creation.yes"}}</label>
    </div>
  </div>

  {{#if this.wantIdPix}}
    <div class="form__field">
      <PixInput
        @id="external-id-label"
        @name="external-id-label"
        @label={{t "pages.campaign-creation.external-id-label.label"}}
        maxlength="255"
        aria-required="true"
        @value={{@campaign.idPixLabel}}
      />
      {{#if @campaign.errors.idPixLabel}}
        <div class="form__error error-message">
          {{display-campaign-errors @campaign.errors.idPixLabel}}
        </div>
      {{/if}}
      <div class="form__information help-text">
        {{t "pages.campaign-creation.external-id-label.suggestion"}}
      </div>
    </div>
  {{/if}}

  {{#if this.isCampaignGoalAssessment}}
    <div class="form__field">
      <PixInput
        @label={{t "pages.campaign-creation.test-title.label"}}
        @id="campaign-title"
        @name="campaign-title"
        maxlength="50"
        @value={{@campaign.title}}
      />
    </div>
  {{/if}}

  <div class="form__field">
    <PixTextarea
      @label={{t "pages.campaign-creation.landing-page-text.label"}}
      @id="custom-landing-page-text"
      @maxlength="5000"
      @value={{@campaign.customLandingPageText}}
      rows="8"
    />
  </div>

  <div class="form__validation">
    <PixButton @triggerAction={{@onCancel}} @backgroundColor="transparent-light">
      {{t "common.actions.cancel"}}
    </PixButton>

    <PixButton @type="submit">
      {{t "pages.campaign-creation.actions.create"}}
    </PixButton>
  </div>

  {{#if this.wantIdPix}}
    <div class="new-item-form__gdpr-information help-text">
      {{t "pages.campaign-creation.legal-warning"}}
    </div>
  {{/if}}

</form>