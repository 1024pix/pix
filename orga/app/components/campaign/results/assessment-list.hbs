<section ...attributes>
  <h3 class="sr-only">{{t "pages.campaign-results.table.title"}}</h3>

  <Campaign::Filter::ParticipationFilters
    @campaign={{@campaign}}
    @selectedDivisions={{@selectedDivisions}}
    @selectedBadges={{@selectedBadges}}
    @selectedStages={{@selectedStages}}
    @rowCount={{@participations.meta.rowCount}}
    @onResetFilter={{@onResetFilter}}
    @onFilter={{@onFilter}}
  />

  <div class="panel">
    <table class="table content-text content-text--small">
      <thead>
        <tr>
          <th>{{t "pages.campaign-results.table.column.last-name"}}</th>
          <th>{{t "pages.campaign-results.table.column.first-name"}}</th>
          {{#if @campaign.idPixLabel}}
            <th>{{@campaign.idPixLabel}}</th>
          {{/if}}
          <th>{{t "pages.campaign-results.table.column.results.label"}}</th>
          {{#if @campaign.hasBadges}}
            <th>{{t "pages.campaign-results.table.column.badges"}}</th>
          {{/if}}
        </tr>
      </thead>

      {{#if @participations}}
        <tbody>
          {{#each @participations as |participation|}}
            <tr
              aria-label={{t "pages.campaign-results.table.row-title"}}
              role="button"
              {{on "click" (fn @onClickParticipant @campaign.id participation.id)}}
              class="tr--clickable"
            >
              <td>
                <LinkTo
                  @route={{"authenticated.campaigns.participant-assessment"}}
                  @models={{array @campaign.id participation.id}}
                >
                  {{participation.lastName}}
                </LinkTo>
              </td>
              <td>{{participation.firstName}}</td>
              {{#if @campaign.idPixLabel}}
                <td>{{participation.participantExternalId}}</td>
              {{/if}}
              {{#if @campaign.hasStages}}
                <td>
                  <Campaign::StageStars
                    @result={{multiply participation.masteryPercentage 100}}
                    @stages={{@campaign.stages}}
                    @withTooltip={{true}}
                    @tooltipPosition="bottom-left"
                  />
                </td>
              {{else}}
                <td class="participant-list__mastery-percentage">
                  {{t "pages.campaign-results.table.column.results.value" percentage=participation.masteryPercentage}}
                </td>
              {{/if}}
              {{#if @campaign.hasBadges}}
                <td class="participant-list__badges">
                  <Campaign::Badges @badges={{participation.badges}} />
                </td>
              {{/if}}
            </tr>
          {{/each}}
        </tbody>
      {{/if}}
    </table>

    {{#unless @participations}}
      <p class="table__empty content-text">{{t "pages.campaign-results.table.empty"}}</p>
    {{/unless}}
  </div>

  {{#if @participations}}
    <Table::PaginationControl @pagination={{@participations.meta}} />
  {{/if}}
</section>