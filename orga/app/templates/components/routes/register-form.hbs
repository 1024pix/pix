<div class="register-form">
  <form {{on 'submit' this.register}}>

    <div id="register-firstName-container" class="input-container">
      <label for="register-firstName" class="label">Prénom</label>
      {{#if this.validation.firstName.hasError}}
        <div class="alert-input alert-input--error" role="alert">{{this.validation.firstName.message}}</div>
      {{/if}}
      <Input
        @id="register-firstName"
        @name="firstName"
        @type="firstName"
        @class="input {{if this.validation.firstName.hasError 'input--error'}}"
        @value={{this.user.firstName}}
        @autocomplete="firstname"
        {{on "focusout" (fn this.validateInput "firstName" this.user.firstName)}}
      />
    </div>

    <div id="register-lastName-container" class="input-container">
      <label for="register-lastName" class="label">Nom</label>
      {{#if this.validation.lastName.hasError}}
        <div class="alert-input alert-input--error" role="alert">{{this.validation.lastName.message}}</div>
      {{/if}}
      <Input
        @id="register-lastName"
        @name="lastName"
        @type="lastName"
        @class="input {{if this.validation.lastName.hasError 'input--error'}}"
        @value={{this.user.lastName}}
        @autocomplete="lastname"
        {{on "focusout" (fn this.validateInput "lastName" this.user.lastName)}}
      />
    </div>

    <div id="register-email-container" class="input-container">
      <label for="register-email" class="label">Adresse e-mail</label>
      {{#if this.validation.email.hasError}}
        <div class="alert-input alert-input--error" role="alert">{{this.validation.email.message}}</div>
      {{/if}}
      <Input
        @id="register-email"
        @name="email"
        @type="email"
        @class="input {{if this.validation.email.hasError 'input--error'}}"
        @value={{this.user.email}}
        @autocomplete="username"
        {{on "focusout" (fn this.validateInput "email" this.user.email)}}
      />
    </div>

    <div id="register-password-container" class="input-container">
      <label for="register-password" class="label">Mot de passe</label>
      {{#if this.validation.password.hasError}}
        <div class="alert-input alert-input--error" role="alert">{{this.validation.password.message}}</div>
      {{/if}}
      <div class="input-password {{if this.validation.password.hasError 'input-password--error'}}">
        <Input
          @id="register-password"
          @name="password"
          @type={{this.passwordInputType}}
          @class="input"
          @value={{this.user.password}}
          @autocomplete="current-password"
          {{on "focusout" (fn this.validateInput "password" this.user.password)}}
        />
        <button type="button" aria-label="rendre le mot de passe lisible" class="input-password__icon" {{on 'click' this.togglePasswordVisibility}}>
          {{#if this.isPasswordVisible}}
            <div tabindex="-1" {{on 'mousedown' this.togglePasswordVisibility}}>
              <FaIcon @icon='eye' @class="fa-fw input-password-icon__eye"></FaIcon>
            </div>
          {{else}}
            <div tabindex="-1" {{on 'mousedown' this.togglePasswordVisibility}}>
              <FaIcon @icon='eye-slash' @class="fa-fw input-password-icon__eye"></FaIcon>
            </div>
          {{/if}}
        </button>
      </div>
    </div>

    <div id="register-cgu-container" class="input-container">
      <label for="register-cgu" class="label register-form__cgu-label">
        <Input
          @id="register-cgu"
          @type="checkbox"
          @checked={{this.user.cgu}}
          {{on "focusout" (fn this.validateInput "cgu" this.user.cgu)}}
        />
        <span class="register-form__cgu">
      J'​accepte les <a href="https://pix.fr/conditions-generales-d-utilisation" class="link" target="_blank" rel="noopener noreferrer">conditions d'​utilisation de Pix</a>
    </span>
      </label>
      {{#if this.validation.cgu.hasError}}
        <div class="alert-input alert-input--error alert-input--left" role="alert">{{this.validation.cgu.message}}</div>
      {{/if}}
    </div>

    <div class="input-container">
      {{#if this.isLoading}}
        <button type="button" class="button"><span class="loader-in-button">&nbsp;</span></button>
      {{else}}
        <button type="submit" class="button">Je m'inscris</button>
      {{/if}}
    </div>

  </form>

  <div class="legal-text">
    Les informations recueillies sur ce formulaire sont enregistrées dans un fichier informatisé par Pix pour
    permettre l’accès au service offert. Elles sont conservées pendant la durée d’utilisation du service et sont
    destinées à Pix. Les résultats des tests pourront être communiqués à des tiers, avec votre consentement, dans le
    cas où vous avez été invité à suivre un parcours spécifique. Conformément à la loi « informatique et libertés »,
    vous pouvez exercer votre droit d'accès aux données vous concernant et les faire rectifier en contactant le
    Délégué à la Protection des Données de Pix à dpo@pix.fr.
  </div>
</div>
