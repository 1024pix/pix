<div class="list-students-page__header">
  <div class="page__title page-title">Élèves</div>
  {{#if currentUser.isAdminInOrganization}}
    <div class="list-students-page__import-students-button">
      <FileUpload @name="file-upload" @for="students-file-upload" @accept=".xml" @multiple={{false}} @onfileadd={{action importStudents}}>
        <span class="button" role="button" tabindex=0>Importer (.xml)</span>
      </FileUpload>
    </div>
  {{/if}}
</div>

<div class="panel">
  <div class="table content-text content-text--small">
    <table>
      <thead>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Date de naissance</th>
        <th>Connecté avec</th>
        <th>Mot de passe</th>
      </tr>
      </thead>

      {{#if students}}
        <tbody>
        {{#each students as |student|}}
          <tr>
            <td>{{student.lastName}}</td>
            <td>{{student.firstName}}</td>
            <td>{{moment-format student.birthdate 'DD/MM/YYYY' allow-empty=true}}</td>
            <td class="authentication-methods">{{student.authenticationMethods}}</td>
            <td>
              {{#if student.hasUsername}}
                <button class="button button--with-icon-and-text button-edit-role"
                        type="button" {{action 'openPasswordReset' student}}>
                  Réinitialiser
                </button>
              {{/if}}
            </td>
          </tr>
        {{/each}}

        </tbody>
      {{/if}}
    </table>

    {{#unless students}}
      <div class="table__empty content-text">En attente d'élèves</div>
    {{/unless}}
  </div>

  {{#if isShowingModal}}
    <PasswordResetWindow @student={{student}} @isShowingModal={{isShowingModal}} />
  {{/if}}
</div>

{{#if isLoading}}
  <ModalDialog @translucentOverlay={{true}} @containerClass="pix-modal__translucent">
    <img src="/images/interwind.gif" alt="Chargement…">
  </ModalDialog>
{{/if}}
