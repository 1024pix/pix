{{page-title this.pageTitle replace=true}}
<div>
  <h1 class="page__title page-title">{{t "pages.sessions.new.title"}}</h1>

  <form {{on "submit" this.createSession}} class="session-form">
    <p class="session-form__mandatory-information">
      {{t "common.forms.mandatory-fields" htmlSafe=true}}
    </p>

    <div class="session-form__field">
      <label for="session-address" class="label">
        <abbr title={{t "common.forms.required"}} class="mandatory-mark" aria-hidden="true">*</abbr>
        {{t "common.forms.session-labels.center-name"}}
      </label>
      <Input
        id="session-address"
        name="session-address"
        @type="text"
        maxlength="255"
        class="input"
        @value={{this.session.address}}
        required
      />
      {{#each this.session.errors.address as |error|}}
        <div class="session-form__error error-message">
          {{error.message}}
        </div>
      {{/each}}
    </div>

    <div class="session-form__field">
      <label for="session-room" class="label">
        <abbr title={{t "common.forms.required"}} class="mandatory-mark" aria-hidden="true">*</abbr>
        {{t "common.forms.session-labels.room-name"}}
      </label>
      <Input
        id="session-room"
        name="session-room"
        @type="text"
        maxlength="255"
        class="input"
        @value={{this.session.room}}
        required
      />
      {{#each this.session.errors.room as |error|}}
        <div class="session-form__error error-message">
          {{error.message}}
        </div>
      {{/each}}
    </div>

    <div class="session-form__field">
      <label for="session-date" class="label">
        <abbr title={{t "common.forms.required"}} class="mandatory-mark" aria-hidden="true">*</abbr>
        {{t "common.forms.session-labels.date-start"}}
      </label>
      <EmberFlatpickr
        id="session-date"
        @altFormat="d/m/Y"
        @altInput={{true}}
        @onChange={{this.onDatePicked}}
        @date=""
        @dateFormat="Y-m-d"
        @locale="fr"
        @minDate="today"
        @name="session-date"
        class="input input--small"
      />
      {{#if this.isSessionDateMissing}}
        <div class="session-form__error error-message">
          {{t "pages.sessions.new.errors.SESSION_DATE_REQUIRED"}}
        </div>
      {{/if}}
    </div>

    <div class="session-form__field">
      <label for="session-time" class="label">
        <abbr title={{t "common.forms.required"}} class="mandatory-mark" aria-hidden="true">*</abbr>
        {{t "common.forms.session-labels.time-start"}}
      </label>
      <EmberFlatpickr
        id="session-time"
        @onChange={{this.onTimePicked}}
        @onClose={{this.onTimePicked}}
        @enableTime={{true}}
        @date=""
        @noCalendar={{true}}
        @dateFormat="H:i"
        @time_24hr={{true}}
        @enableSeconds={{false}}
        @name="session-time"
        class="input input--small"
      />
      {{#if this.isSessionTimeMissing}}
        <div class="session-form__error error-message">
          {{t "pages.sessions.new.errors.SESSION_TIME_REQUIRED"}}
        </div>
      {{/if}}
    </div>

    <div class="session-form__field">
      <label for="session-examiner" class="label">
        <abbr title={{t "common.forms.required"}} class="mandatory-mark" aria-hidden="true">*</abbr>
        {{t "common.forms.session-labels.invigilator"}}
      </label>
      <Input
        id="session-examiner"
        name="session-examiner"
        @type="text"
        maxlength="255"
        class="input"
        @value={{this.session.examiner}}
        required
      />
      {{#each this.session.errors.examiner as |error|}}
        <div class="session-form__error error-message">
          {{error.message}}
        </div>
      {{/each}}
    </div>

    <div class="session-form__field">
      <label for="session-description" class="label">{{t "common.forms.session-labels.observations"}}</label>
      <Textarea
        id="session-description"
        name="session-description"
        maxlength="350"
        rows={{8}}
        @value={{this.session.description}}
        class="textarea"
      />
    </div>

    <ul class="session-form__actions">
      <li>
        <PixButton
          data-test-id="session-form__cancel-button"
          @backgroundColor="transparent-light"
          @triggerAction={{this.cancel}}
          @isBorderVisible="true"
          aria-label={{t "pages.sessions.new.actions.cancel-extra-information"}}
        >
          {{t "common.actions.cancel"}}
        </PixButton>
      </li>
      <li>
        <PixButton @type="submit">
          {{t "pages.sessions.new.actions.create-session"}}
        </PixButton>
      </li>
    </ul>

  </form>
</div>