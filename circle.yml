machine:
  node:
    version: v6.2.1

dependencies:
  pre:
    - npm install -g bower
    - npm install
    - bower install
test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit
    - npm run build
    - npm run ci:test
    - npm run ci:coverage

deployment:
  development:
    branch: master
    commands:
      - git config --global user.email 'mackwic@gmail.com'
      - git config --global user.name 'Thomas Wickham'
      - npm run deploy:development

  in-progress:
    branch: /.*/
    commands:
      - git config --global user.email 'mackwic@gmail.com'
      - git config --global user.name 'Thomas Wickham'
      - npm run deploy:branch
      - ./scripts/signal_deploy_to_pr.sh

general:
  branches:
    ignore:
      - gh-pages
