machine:
  node:
    version: v6.9.0

dependencies:
  override:
    - make install

test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit
    - make ci-test

deployment:
  staging:
    branch: dev
    commands:
      - git config --global user.email 'jbuget@gmail.com'
      - git config --global user.name 'Jérémy Buget'
      - make deploy-staging

  integration:
    branch: /.*/
    commands:
      - git config --global user.email 'jbuget@gmail.com'
      - git config --global user.name 'Jérémy Buget'
      - make deploy-integration

general:
  branches:
    ignore:
      - gh-pages
