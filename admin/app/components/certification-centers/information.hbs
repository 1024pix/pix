<section class="page-section mb_10">
  <div class="certification-center-information">

    {{#if this.isEditMode}}
      <h1>Modifier un centre de certification</h1>
      <div class="certification-center-information__edit-form">
        <form class="form" onsubmit={{this.submitForm}}>

          <div class="form-field">
            <label for="name" class="field__label">Nom du centre</label>
            {{#if (v-get this.form "name" "isInvalid")}}
              <div class="form-field__error" aria-label="Message d'erreur du champ nom">
                {{v-get this.form "name" "message"}}
              </div>
            {{/if}}
            <Input
              id="name"
              @type="text"
              class={{if (v-get this.form "name" "isInvalid") "form-control is-invalid" "form-control"}}
              @value={{this.form.name}}
              required={{true}}
            />
          </div>

          <div class="form-field">
            <label for="certification-center-type" class="field__label">Type</label>
            {{#if (v-get this.form "type" "isInvalid")}}
              <div class="form-field__error" aria-label="Message d'erreur du champ type">
                {{v-get this.form "type" "message"}}
              </div>
            {{/if}}
            <PixSelect
              id="certification-center-type"
              @options={{this.certificationCenterTypes}}
              @isSearchable={{false}}
              @emptyOptionNotSelectable={{true}}
              @emptyOptionLabel={{"-- Choisissez --"}}
              @selectedOption={{this.form.type}}
              @onChange={{this.selectCertificationCenterType}}
              class={{if (v-get this.form "type" "isInvalid") "form-control is-invalid" "form-control"}}
            />
          </div>

          <div class="form-field">
            <label for="external-id" class="field__label">Identifiant externe</label>
            {{#if (v-get this.form "externalId" "isInvalid")}}
              <div class="form-field__error" aria-label="Message d'erreur du champ ID externe">
                {{v-get this.form "externalId" "message"}}
              </div>
            {{/if}}
            <Input
              id="external-id"
              @type="text"
              class={{if (v-get this.form "externalId" "isInvalid") "form-control is-invalid" "form-control"}}
              @value={{this.form.externalId}}
            />
          </div>
          <div class="form-field certification-center-information__edit-form__accreditations-checkbox-list">
            <h2 class="field__label">Habilitations aux certifications complémentaires</h2>
            <ul class="accreditations-list-ul">
              {{#each this.availableAccreditations as |accreditation|}}
                <li>
                  <div class="accreditation-entry">
                    <Input
                      id="accreditation-checkbox__{{accreditation.id}}"
                      @type="checkbox"
                      @checked={{contains accreditation @certificationCenter.accreditations}}
                      {{on "input" (fn this.updateGrantedAccreditation accreditation)}}
                    />
                    <label class="field__label" for="accreditation-checkbox__{{accreditation.id}}">
                      {{accreditation.name}}
                    </label>
                  </div>
                </li>
              {{/each}}
            </ul>
          </div>
          <div class="form-actions justify-content-end">
            <PixButton
              @size="small"
              @backgroundColor="transparent-light"
              @isBorderVisible={{false}}
              @triggerAction={{this.exitEditMode}}
            >Annuler
            </PixButton>
            <PixButton @type="submit" @size="small" @backgroundColor="blue">Enregistrer</PixButton>
          </div>
        </form>
      </div>
    {{else}}
      <div class="certification-center-information__display">
        <h1 class="certification-center-information__display__name">{{@certificationCenter.name}}</h1>
        <div class="property">
          <label class="field__label">Type :</label>
          <span>{{@certificationCenter.typeLabel}}</span><br />
        </div>
        <div class="property">
          <label class="field__label">Identifiant externe :</label>
          <span>{{@certificationCenter.externalId}}</span><br />
        </div>
        <div class="property">
          <h2 class="field__label">Habilitations aux certifications complémentaires</h2>
          <div class="certification-center-information__display__accreditations-list">
            <ul class="accreditations-list-ul">
              {{#each this.availableAccreditations as |accreditation|}}
                {{#if (contains accreditation @certificationCenter.accreditations)}}
                  <li aria-label={{concat "Habilité pour " accreditation.name}}>
                    <FaIcon class="granted-accreditation-icon" @icon="check-circle" />
                    {{accreditation.name}}
                  </li>
                {{else}}
                  <li aria-label={{concat "Non-habilité pour " accreditation.name}}>
                    <FaIcon class="not-granted-accreditation-icon" @icon="times-circle" />
                    {{accreditation.name}}
                  </li>
                {{/if}}
              {{/each}}
            </ul>
          </div>
          <PixButton
            @backgroundColor="transparent-light"
            @isBorderVisible={{true}}
            @size="small"
            @triggerAction={{this.enterEditMode}}
            aria-label="Editer"
          >Editer
          </PixButton>
        </div>
      </div>
    {{/if}}
  </div>
</section>