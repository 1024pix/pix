{{#each @orderedAreasBySelectedFrameworks as |area|}}
  <div class="area-border-container">
    <div class="area-border {{area.color}}"></div>
    <PixCollapsible @title="{{area.code}} · {{area.title}}" class="{{area.color}} list-competences">
      {{#each area.sortedCompetences as |competence|}}
        <div class="list-tube-container">
          <PixCollapsible @title="{{competence.index}} {{competence.name}}">
            <div class="panel">
              <table class="table content-text content-text--small select-tube-table">
                <caption class="sr-only">Sélection des sujets</caption>
                <thead>
                  <tr>
                    <Table::Header @size="medium" scope="col">
                      <label>
                        <Input
                          @type="checkbox"
                          {{on "input" (fn this.updateSelectedCompetence competence.id)}}
                          id="competence-{{competence.id}}"
                        />
                        Thématiques
                      </label>
                    </Table::Header>
                    <Table::Header @size="wide" scope="col">
                      <p>Sujets</p>
                    </Table::Header>
                    <Table::Header @size="small" scope="col">
                      <p>Niveau</p>
                    </Table::Header>
                    <Table::Header @size="medium" @align="center" scope="col">
                      <p>Compatibilité</p>
                    </Table::Header>
                  </tr>
                </thead>

                <tbody>
                  {{#each competence.sortedThematics as |thematic|}}
                    {{#each thematic.tubes as |tube index|}}
                      <tr {{on "click" this.toggleTubeInput}} class="row-tube" aria-label="Sujet">
                        {{#if (eq index 0)}}
                          <th
                            class="th--clickable"
                            rowspan={{thematic.tubes.length}}
                            {{on "click" this.toggleThematicInput}}
                          >
                            <label>
                              <Input
                                {{on "input" (fn this.updateSelectedThematic thematic.id)}}
                                data-competence={{competence.id}}
                                data-thematicId={{thematic.id}}
                                id="thematic-{{thematic.id}}"
                                @type="checkbox"
                              />
                              {{thematic.name}}
                            </label>
                          </th>
                        {{/if}}
                        <td>
                          <Input
                            {{on "input" (fn this.updateSelectedTubes tube.id)}}
                            data-thematic={{thematic.id}}
                            data-competenceId={{competence.id}}
                            data-tube={{tube.id}}
                            id="tube-{{tube.id}}"
                            @type="checkbox"
                          />
                          <label for="tube-{{tube.id}}">
                            {{tube.practicalTitle}}
                            :
                            {{tube.practicalDescription}}
                          </label>
                        </td>
                        <td class="table__column--center">
                          <PixSelect
                            id="select-level-tube-{{tube.id}}"
                            @options={{this.levelOptions}}
                            @onChange={{fn this.setLevelTube tube.id}}
                            @selectedOption={{8}}
                          />
                          <label for="select-level-tube-{{tube.id}}" class="sr-only">Séléction du niveau du sujet</label>
                        </td>
                        <td class="table__column--center">
                          <div
                            class="icon-container"
                            aria-label="{{if
                              tube.mobile
                              'pages.preselect-target-profile.table.is-responsive'
                              'pages.preselect-target-profile.table.not-responsive'
                            }}"
                          >
                            <FaIcon @icon="mobile-alt" class="fa-2x {{if tube.mobile 'is-responsive'}}" />
                            {{#unless tube.mobile}}
                              <FaIcon @icon="slash" class="fa-2x not-responsive" />
                            {{/unless}}
                          </div>
                          <div
                            class="icon-container"
                            aria-label="{{if
                              tube.tablet
                              'pages.preselect-target-profile.table.is-responsive'
                              'pages.preselect-target-profile.table.not-responsive'
                            }}"
                          >
                            <FaIcon @icon="tablet-alt" class="fa-2x {{if tube.tablet 'is-responsive'}}" />
                            {{#unless tube.tablet}}
                              <FaIcon @icon="slash" class="fa-2x not-responsive" />
                            {{/unless}}
                          </div>
                        </td>
                      </tr>
                    {{/each}}
                  {{/each}}
                </tbody>
              </table>
            </div>
          </PixCollapsible>
        </div>
      {{/each}}
    </PixCollapsible>
  </div>

{{else}}
  Aucun référentiel de sélectionné
{{/each}}