<header class="page-section__header">
  <h2 class="page-section__title">Méthodes de connexion</h2>
</header>

<table class="authentication-method">

  <caption class="authentication-method__caption">Méthodes de connexion</caption>

  <tbody>
    <tr data-test-email>
      <td class="authentication-method__name-column">Adresse e-mail</td>
      <td>
        {{#if @user.hasEmailAuthenticationMethod}}
          <FaIcon
            @icon="check-circle"
            aria-label="L'utilisateur a une méthode de connexion avec adresse e-mail"
            class="authentication-method__check"
          />
        {{else}}
          <FaIcon
            @icon="times-circle"
            aria-label="L'utilisateur n'a pas de méthode de connexion avec adresse e-mail"
            class="authentication-method__uncheck"
          />
        {{/if}}
      </td>
      <td>
        {{#if (and @user.hasEmailAuthenticationMethod (not @user.hasOnlyOneAuthenticationMethod))}}
          <PixButton
            class="user-authentication-method__remove-button"
            @size="small"
            @backgroundColor="red"
            @triggerAction={{fn @toggleDisplayRemoveAuthenticationMethodModal "EMAIL"}}
            data-test-remove-email
          >SUPPRIMER</PixButton>
        {{/if}}
      </td>
      <td>
        {{#if (and @user.hasOnlyOneAuthenticationMethod (not @user.hasPixAuthenticationMethod))}}
          <PixButton @triggerAction={{this.toggleAddAuthenticationMethodModal}} @size="small">Ajouter une adresse e-mail</PixButton>
        {{/if}}
      </td>
    </tr>

    <tr data-test-username>
      <td class="authentication-method__name-column">Identifiant</td>
      <td>
        {{#if @user.hasUsernameAuthenticationMethod}}
          <FaIcon
            @icon="check-circle"
            aria-label="L'utilisateur a une méthode de connexion avec identifiant"
            class="authentication-method__check"
          />
        {{else}}
          <FaIcon
            @icon="times-circle"
            aria-label="L'utilisateur n'a pas de méthode de connexion avec identifiant"
            class="authentication-method__uncheck"
          />
        {{/if}}
      </td>
      <td>
        {{#if (and @user.hasUsernameAuthenticationMethod (not @user.hasOnlyOneAuthenticationMethod))}}
          <PixButton
            class="user-authentication-method__remove-button"
            @size="small"
            @backgroundColor="red"
            @triggerAction={{fn @toggleDisplayRemoveAuthenticationMethodModal "USERNAME"}}
            data-test-remove-username
          >SUPPRIMER</PixButton>
        {{/if}}
      </td>
    </tr>

    <tr data-test-pole-emploi>
      <td class="authentication-method__name-column">Pôle emploi</td>
      <td>
        {{#if @user.hasPoleEmploiAuthenticationMethod}}
          <FaIcon
            @icon="check-circle"
            aria-label="L'utilisateur a une méthode de connexion avec Pôle Emploi"
            class="authentication-method__check"
          />
        {{else}}
          <FaIcon
            @icon="times-circle"
            aria-label="L'utilisateur n'a pas de méthode de connexion avec Pôle Emploi"
            class="authentication-method__uncheck"
          />
        {{/if}}
      </td>
      <td>
        {{#if (and @user.hasPoleEmploiAuthenticationMethod (not @user.hasOnlyOneAuthenticationMethod))}}
          <PixButton
            class="user-authentication-method__remove-button"
            @size="small"
            @backgroundColor="red"
            @triggerAction={{fn @toggleDisplayRemoveAuthenticationMethodModal "POLE_EMPLOI"}}
            data-test-remove-pole-emploi
          >SUPPRIMER</PixButton>
        {{/if}}
      </td>
    </tr>

    <tr data-test-gar>
      <td class="authentication-method__name-column">Médiacentre</td>
      <td>
        {{#if @user.hasGARAuthenticationMethod}}
          <FaIcon @icon="check-circle" class="authentication-method__check" />
        {{else}}
          <FaIcon
            @icon="times-circle"
            aria-label="L'utilisateur n'a pas de méthode de connexion avec GAR"
            class="authentication-method__uncheck"
          />
        {{/if}}
      </td>
      <td>
        {{#if (and @user.hasGARAuthenticationMethod (not @user.hasOnlyOneAuthenticationMethod))}}
          <PixButton
            class="user-authentication-method__remove-button"
            @size="small"
            @backgroundColor="red"
            @triggerAction={{fn @toggleDisplayRemoveAuthenticationMethodModal "GAR"}}
            data-test-remove-mediacentre
          >SUPPRIMER</PixButton>
        {{/if}}
      </td>
    </tr>
  </tbody>
</table>

<Users::UserDetailPersonalInformation::AddAuthenticationMethodModal
  @showAddAuthenticationMethodModal={{this.showAddAuthenticationMethodModal}}
  @newEmail={{this.newEmail}}
  @toggleAddAuthenticationMethodModal={{this.toggleAddAuthenticationMethodModal}}
  @submitAddingPixAuthenticationMethod={{this.submitAddingPixAuthenticationMethod}}
/>