{{!-- template-lint-disable no-action --}}
<div class="certification-informations">
  <div class="buttons-row">
    <PixButton
      @route="authenticated.users.get"
      @size="small"
      @model={{this.certification.userId}}
    >
      Voir les détails de l'utilisateur
    </PixButton>
    <PixButton
      @backgroundColor="red"
      @isDisabled={{this.isCertificationCancelled}}
      @size="small"
      @triggerAction={{this.onCancelCourseButtonClick}}
      data-test-id="Annuler la certification"
    >
      Annuler la certification
      </PixButton>
  </div>

  <div class="row">
    <div class="col">
      <Certification::CertificationInformationStatusCard
        @certification={{this.certification}}
        @editingCandidateResults={{this.editingCandidateResults}}
      />
    </div>

    <div class="col">
      <Certification::CertificationInformationCandidateCard
          @editingCandidateResults={{this.editingCandidateResults}}
          @certification={{this.certification}}
          @onEditButtonClick={{this.openCandidateEditModal}}
          @isModifyButtonDisabled={{this.isModifyButtonDisabled}}
      />
    </div>
  </div>

  {{#if this.hasIssueReports}}
    <Certification::CertificationInformationIssueReportsCard
          @hasImpactfulIssueReports={{this.hasImpactfulIssueReports}}
          @hasUnimpactfulIssueReports={{this.hasUnimpactfulIssueReports}}
          @impactfulCertificationIssueReports={{this.impactfulCertificationIssueReports}}
          @unimpactfulCertificationIssueReports={{this.unimpactfulCertificationIssueReports}}
    />
  {{/if}}

  <div class="row">
    <div class="col">
      <Certification::CertificationInformationJuryCommentsCard
          @editingCandidateResults={{this.editingCandidateResults}}
          @certification={{this.certification}}
      />
    </div>
  </div>
  <div class="row">
    <div class="col">
      <Certification::CertificationInformationResultsCard
            @editingCandidateResults={{this.editingCandidateResults}}
            @certification={{this.certification}}
            @onUpdateScore={{this.onUpdateScore}}
            @onUpdateLevel={{this.onUpdateLevel}}
      />
    </div>
  </div>
  {{#if this.isValid}}
    <div class="row">
      <div class="col certification-informations__actions form-actions">
        {{#if this.editingCandidateResults}}
          <PixButton
            @size="small"
            @backgroundColor="transparent-light"
            @isBorderVisible={{true}}
            @triggerAction={{this.onCandidateResultsCancel}}
            aria-label="Annuler la modification des résultats du candidat"
          >
            Annuler
          </PixButton>
          <PixButton
            @size="small"
            @triggerAction={{this.onCandidateResultsSaveConfirm}}
            @backgroundColor="green"
            aria-label="Enregistrer les résultats du candidat"
          >
            Enregistrer
          </PixButton>
        {{else}}
          <PixButton
            @size="small"
            @triggerAction={{this.onCandidateResultsEdit}}
            aria-label="Modifier les résultats du candidat"
            @isDisabled={{this.editingCandidateInformations}}
          >
            Modifier
          </PixButton>
        {{/if}}
      </div>
    </div>
  {{/if}}
  <ConfirmPopup
          @message={{this.confirmMessage}}
          @error={{this.confirmErrorMessage}}
          @confirm={{action this.confirmAction}}
          @cancel={{action this.onCandidateResultsCancelConfirm}}
          @show={{this.displayConfirm}} />
</div>
<Certification::CandidateEditModal
  @isDisplayed={{this.isCandidateEditModalOpen}}
  @onCancelButtonsClicked={{this.closeCandidateEditModal}}
  @onFormSubmit={{this.onCandidateInformationSave}}
  @candidate={{this.certification}}
  @countries={{this.countries}}
/>
