<div class="page-section attach-target-profile">
  <h1 class="attach-target-profile__header">
    Rattacher un nouveau profil cible à la certification
    {{@model.complementaryCertification.label}}
  </h1>
  <ComplementaryCertifications::Common::LinkToCurrentTargetProfile @model={{@model.currentTargetProfile}} />

  <form class="form" {{on "submit" this.onSubmit}}>
    <Card @title="1. Renseigner le nouveau profil cible à rattacher">
      <ComplementaryCertifications::AttachBadges::TargetProfileSelector
        @onError={{this.onError}}
        @onSelection={{this.onSelection}}
        @onChange={{this.onReset}}
      />
    </Card>

    {{#if this.selectedTargetProfile}}
      <Card class="attach-target-profile__card-badges" @title="2. Complétez les niveaux des résultats thématiques">
        <ComplementaryCertifications::AttachBadges::Badges
          @targetProfile={{this.selectedTargetProfile}}
          @onError={{this.onError}}
          @onBadgeUpdated={{this.onBadgeUpdated}}
        />
      </Card>
    {{/if}}

    <div class="attach-target-profile__actions">
      <PixButton
        @type="submit"
        @size="big"
        @isBorderVisible={{true}}
        @isDisabled={{this.isSubmitDisabled}}
        aria-disabled={{this.isSubmitDisabled}}
        @isLoading={{this.isSubmitting}}
      >
        Rattacher le profil cible
      </PixButton>
      <PixButton
        @size="big"
        @backgroundColor="transparent-light"
        @isBorderVisible={{true}}
        @triggerAction={{this.onCancel}}
      >
        Annuler
      </PixButton>
    </div>
  </form>
</div>